---
title: åç«¯é¡¹ç›®å¯åŠ¨
date: 2026-02-09 10:07:05
permalink: /pages/caff79/
---

ä½ å¥½å‘€ï¼Œæˆ‘çš„è€æœ‹å‹ï¼æˆ‘æ˜¯è€å¯‡ï¼Œæ¬¢è¿æ¥åˆ°è€å¯‡IoTäº‘å¹³å°ï¼

##### ç¯å¢ƒé…ç½®

<font style="color:red;">æ³¨æ„ï¼šæœ¬æ•™ç¨‹åªé’ˆå¯¹**Window**ï¼Œä¿®æ”¹Winç³»ç»Ÿä¸Šé¢çš„hosts(<font color="red">å¦‚æœ‰éœ€è¦ï¼Œè¯·è‡ªè¡Œæ›´æ¢IPï¼Œæ¯”å¦‚è¯´ä½¿ç”¨äº‘æœåŠ¡ï¼Œè¯·æ›´æ¢æˆäº‘æœåŠ¡å™¨IP</font>)ã€ç›®å½•ä½ç½®ï¼š<font color="red">C:\Windows\System32\drivers\etc\hosts</font>ã€‘</font>

```text
127.0.0.1 kafka
127.0.0.1 redis
127.0.0.1 postgresql
127.0.0.1 nginx
127.0.0.1 elasticsearch
127.0.0.1 nacos
127.0.0.1 gateway
127.0.0.1 tdengine
127.0.0.1 snail-job
127.0.0.1 auth
127.0.0.1 admin
127.0.0.1 jaeger-collector
127.0.0.1 otel-collector
127.0.0.1 ui
127.0.0.1 iot
127.0.0.1 loki
127.0.0.1 jaeger-query
127.0.0.1 pulsar
127.0.0.1 sentinel
```

<font style="color:red;">æ³¨æ„ï¼šè¯·æå‰å®‰è£…Windowçš„Docker</font>

[windowå®‰è£…dockeræ•™ç¨‹](https://kcloud.blog.csdn.net/article/details/123039609)

<font color="red">æ³¨æ„ï¼šæœ¬æ•™ç¨‹ä¸ºWindowç³»ç»Ÿçš„dockerï¼Œå…¶ä½™ç¯å¢ƒè¯·è‡ªè¡Œå®‰è£…</font>

<font color="red">æ³¨æ„ï¼šWindowç³»ç»Ÿè‡ªå¸¦docker-composeï¼Œæ— éœ€å®‰è£…</font>

<font color="red">æ³¨æ„ï¼šå…ˆè·‘èµ·æ¥ï¼Œä¸è¦æ”¹ä»»ä½•çš„å¯†ç ï¼Œè¯·ä¸è¦æ“…ä½œä¸»å¼ çš„ä¿®æ”¹ï¼Œå¦‚æœç…§ç€æ•™ç¨‹è¿è¡Œï¼Œè¿˜æœ‰é—®é¢˜è¯·è”ç³»ä½œè€…</font>

<font color="red">æ³¨æ„ï¼šæœ¬æ•™ç¨‹ä¸ºWindowç³»ç»Ÿçš„dockerï¼Œå…¶ä½™ç¯å¢ƒè¯·è‡ªè¡Œå®‰è£…</font>

```shell
services:
  postgresql:
    image: timescale/timescaledb:latest-pg17
    container_name: postgresql
    # ä¿æŒå®¹å™¨åœ¨æ²¡æœ‰å®ˆæŠ¤ç¨‹åºçš„æƒ…å†µä¸‹è¿è¡Œ
    tty: true
    restart: always
    privileged: true
    ports:
      - "5432:5432"
    volumes:
      - ./postgresql17/data:/var/lib/postgresql/data
    environment:
      - POSTGRES_USER=root
      - POSTGRES_PASSWORD=laokou123
      - TZ=Asia/Shanghai
    networks:
      - iot_network
  redis:
    image: redis:8.4.0
    container_name: redis
    # ä¿æŒå®¹å™¨åœ¨æ²¡æœ‰å®ˆæŠ¤ç¨‹åºçš„æƒ…å†µä¸‹è¿è¡Œ
    tty: true
    restart: always
    privileged: true
    ports:
      - "6379:6379"
    volumes:
      - ./redis7/conf/redis.conf:/etc/redis/redis.conf
      - ./redis7/data:/data
    command: redis-server --appendonly yes --requirepass 'laokou123'
    environment:
      - TZ=Asia/Shanghai
    networks:
      - iot_network
  kafka:
    image: apache/kafka:4.1.1
    container_name: kafka
    tty: true
    ports:
      - '9092:9092'
      - '9093:9093'
    environment:
      - KAFKA_NODE_ID=1
      - KAFKA_PROCESS_ROLES=broker,controller
      - KAFKA_LISTENERS=PLAINTEXT://:9092,CONTROLLER://:9093
      - KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:9092
      - KAFKA_CONTROLLER_LISTENER_NAMES=CONTROLLER
      - KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT
      - KAFKA_CONTROLLER_QUORUM_VOTERS=1@kafka:9093
      - KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
      - KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR=1
      - KAFKA_TRANSACTION_STATE_LOG_MIN_ISR=1
      - KAFKA_GROUP_INITIAL_REBALANCE_DELAY_MS=0
      - KAFKA_NUM_PARTITIONS=3
    restart: always
    privileged: true
    networks:
      - iot_network
  # bin/pulsar-admin tenants create laokou
  # bin/pulsar-admin namespaces create laokou/mqtt
  # bin/pulsar-admin topics create-partitioned-topic laokouyun/mqtt/laokou-mqtt-up-property-report -p 4
  # bin/pulsar-admin topics create-partitioned-topic laokouyun/mqtt/laokou-mqtt-down-property-read -p 4
  # bin/pulsar-admin topics create-partitioned-topic laokouyun/mqtt/laokou-mqtt-up-property-read-reply -p 4
  # bin/pulsar-admin topics create-partitioned-topic laokouyun/mqtt/laokou-mqtt-down-property-write -p 4
  # bin/pulsar-admin topics create-partitioned-topic laokouyun/mqtt/laokou-mqtt-up-property-write-reply -p 4
  pulsar:
    image: apachepulsar/pulsar:4.1.2
    container_name: pulsar
    # ä¿æŒå®¹å™¨åœ¨æ²¡æœ‰å®ˆæŠ¤ç¨‹åºçš„æƒ…å†µä¸‹è¿è¡Œ
    tty: true
    restart: always
    privileged: true
    command: bin/pulsar standalone
    environment:
      - PULSAR_MEM=-Xms512m -Xmx512m
    ports:
      - "6650:6650"
      - "8080:8080"
    volumes:
      - ./pulsar/data:/pulsar/data
    networks:
      - iot_network
networks:
  iot_network:
    driver: bridge
```

```shell
# å¯åŠ¨
docker compose up -d
```

è¯·å®‰è£…GraalVM 25ã€Maven 3.9.11

<font color="red">æ³¨æ„ï¼šå¼ºåˆ¶ä½¿ç”¨Maven 3.9.11</font>

<font color="red">æ³¨æ„ï¼šå¼ºåˆ¶ä½¿ç”¨Maven 3.9.11</font>

<font color="red">æ³¨æ„ï¼šå¼ºåˆ¶ä½¿ç”¨Maven 3.9.11</font>

<font color="red">æ³¨æ„ï¼šå¼ºåˆ¶ä½¿ç”¨GraalVM 25</font>

<font color="red">æ³¨æ„ï¼šå¼ºåˆ¶ä½¿ç”¨GraalVM 25</font>

<font color="red">æ³¨æ„ï¼šå¼ºåˆ¶ä½¿ç”¨GraalVM 25</font>

##### é¡¹ç›®å¯åŠ¨

ğŸš€ é¡¹ç›®æ‹‰å–ï¼ˆéœ€è¦å®‰è£…gitï¼‰

<font color="red">æ³¨æ„ï¼šé¡¹ç›®ç›®å½•é‡Œé¢ä¸èƒ½å¸¦ä¸­æ–‡</font>

<font color="red">æ³¨æ„ï¼šé¡¹ç›®ç›®å½•é‡Œé¢ä¸èƒ½å¸¦ä¸­æ–‡</font>

<font color="red">æ³¨æ„ï¼šé¡¹ç›®ç›®å½•é‡Œé¢ä¸èƒ½å¸¦ä¸­æ–‡</font>

SSHæ–¹å¼æ‹‰å–ï¼ˆæ¨èï¼‰ã€éœ€è¦é…ç½®å¯†é’¥ã€‘

```shell
git clone git@github.com:KouShenhai/KCloud-Platform-IoT.git
```

HTTPSæ–¹å¼

```shell
git clone https://github.com/KouShenhai/KCloud-Platform-IoT.git
```

ğŸš€ é¡¹ç›®æ„å»º

```shell
# é¡¹ç›®æ‰“åŒ…
mvn clean install -P dev -DskipTests -U
```

ğŸš€ åˆå§‹åŒ–æ•°æ®åº“

<img src="/img/åç«¯é¡¹ç›®å¯åŠ¨/img.png"/>

<font color="red">æ³¨æ„ï¼šä¸åŒçš„æ•°æ®åº“æ‰§è¡Œä¸åŒçš„SQLæ–‡ä»¶ </font>

<font color="red">æ³¨æ„ï¼šä¸åŒçš„æ•°æ®åº“æ‰§è¡Œä¸åŒçš„SQLæ–‡ä»¶ </font>

<font color="red">æ³¨æ„ï¼šä¸åŒçš„æ•°æ®åº“æ‰§è¡Œä¸åŒçš„SQLæ–‡ä»¶ </font>

```shell
# å…ˆåˆ›å»ºæ•°æ®åº“
create_db.sql
# ç„¶ååˆå§‹åŒ–æ•°æ®
kcloud_platform.sqlã€ç³»ç»Ÿç®¡ç†ã€‘
kcloud_platform_domain.sqlã€é¢†åŸŸäº‹ä»¶ã€‘
kcloud_platform_iot.sqlã€ç‰©è”ç®¡ç†ã€‘
kcloud_platform_nacos.sqlã€Nacosã€‘
kcloud_platform_generator.sqlã€ä»£ç ç”Ÿæˆã€‘
```

ğŸš€ æ£€æŸ¥pom.xmlé…ç½®å’Œæ•°æ®åº“è¿æ¥ä¿¡æ¯

<font color="red">æ³¨æ„ï¼šå…ˆè·‘èµ·æ¥ï¼Œä¸è¦æ”¹ä»»ä½•çš„å¯†ç ï¼Œè¯·ä¸è¦æ“…ä½œä¸»å¼ çš„ä¿®æ”¹ï¼Œå¦‚æœç…§ç€æ•™ç¨‹è¿è¡Œï¼Œè¿˜æœ‰é—®é¢˜è¯·è”ç³»ä½œè€…</font>

ğŸš€ å¯åŠ¨Nacosã€é›†ç¾¤ã€‘

<img src="/img/åç«¯é¡¹ç›®å¯åŠ¨/img_1.png"/>

<font color="red">æ³¨æ„ï¼šéœ€è¦è¿è¡Œ3ä¸ªè„šæœ¬ï¼šstart-cluster-node1.cmdã€start-cluster-node2.cmdã€start-cluster-node3.cmd</font>

ğŸš€ å¯åŠ¨æœåŠ¡

<font color="red">æ³¨æ„ï¼šè¯·è¿è¡Œlaokou-nacosã€laokou-distributed-idã€laokou-authã€laokou-gatewayã€laokou-adminã€æœ‰å…ˆåé¡ºåºï¼Œè¯·æŒ‰ç…§æ­¥éª¤å¯åŠ¨æœåŠ¡ã€‘</font>

<font color="red">æ³¨æ„ï¼šè¯·è¿è¡Œlaokou-nacosã€laokou-distributed-idã€laokou-authã€laokou-gatewayã€laokou-adminã€æœ‰å…ˆåé¡ºåºï¼Œè¯·æŒ‰ç…§æ­¥éª¤å¯åŠ¨æœåŠ¡ã€‘</font>

<font color="red">æ³¨æ„ï¼šè¯·è¿è¡Œlaokou-nacosã€laokou-distributed-idã€laokou-authã€laokou-gatewayã€laokou-adminã€æœ‰å…ˆåé¡ºåºï¼Œè¯·æŒ‰ç…§æ­¥éª¤å¯åŠ¨æœåŠ¡ã€‘</font>

ğŸš€ è®¿é—®APIæ–‡æ¡£

ç½‘å…³æœåŠ¡ï¼šhttp://gateway:5555/doc.html

è®¤è¯æœåŠ¡ï¼šhttp://auth:1111/doc.html

ç®¡ç†æœåŠ¡ï¼šhttp://admin:9990/doc.html

<img src="/img/åç«¯é¡¹ç›®å¯åŠ¨/img_2.png"/>

æˆ‘æ˜¯è€å¯‡ï¼Œæˆ‘ä»¬ä¸‹æ¬¡å†è§å•¦ï¼
