import{a as Se,b as we,u as Ie,c as De,N as L,f as xe,d as ze}from"./search-form.vue_vue_type_script_setup_true_lang-Hz521IbE.js";import{bm as q,o as A,b as pe,e as me,d as j,Q as H,R as Q,m as ce,n as fe,a as Re,$ as a,r as ge,S as ye,c as F,w as r,f as e,g as _,t as b,h as t,X as le,bZ as re,a8 as oe,v as _e,s as ne,B,a3 as Ue,a4 as $e,a6 as se,y as be,x as ve,z as K,bo as Ve,a9 as te,b_ as he,bY as ke,P as ae,bk as Ce,b$ as Be,bl as Ae,ad as ie,C as qe,i as Me,ae as P,U as E,bh as Z,O as Pe,ag as Fe}from"./index-BztLELzb.js";import{e as Oe}from"./group-XSuFGJhJ.js";import{_ as We}from"./code-mirror.vue_vue_type_script_setup_true_lang-C5y-UY2A.js";import{_ as ue}from"./select-group.vue_vue_type_script_setup_true_lang-DXA2Evh-.js";import{_ as Ne}from"./select-scene.vue_vue_type_script_setup_true_lang-DZYcuyFp.js";import{_ as Le,a as He}from"./log-CU3xmgB7.js";import{_ as je,a as Ge}from"./DescriptionsItem-gUlfoQM0.js";import{_ as Ee}from"./Grid-DDhjb_3_.js";import"./index-B-_kZKhv.js";import"./retry-scene-y84vzAuY.js";function Ze(d){return q({url:"/retry-task/list",method:"get",params:d})}function Ke(d,w){return q({url:`/retry-task/${d}?groupName=${w}`,method:"get"})}function Qe(d){return q({url:"/retry-task",method:"post",data:d})}function Xe(d){return q({url:"/retry-task/batch",method:"post",data:d})}function Ye(d){return q({url:"/retry-task/status",method:"put",data:d})}function Je(d){return q({url:"/retry-task/manual/trigger/retry/task",method:"post",data:d})}function de(d){return q({url:"/retry-task/batch",method:"delete",data:d})}function et(d){return q({url:"/retry-task/generate/idempotent-id",method:"post",data:d})}const tt={class:"inline-block",viewBox:"0 0 36 36",width:"1em",height:"1em"},at=me("path",{fill:"currentColor",d:"M15 32H3a1 1 0 0 0 0 2h12a1 1 0 0 0 0-2M5 30h8a1 1 0 0 0 1-1V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v25a1 1 0 0 0 1 1M9 5.92a1.5 1.5 0 1 1-1.5 1.5A1.5 1.5 0 0 1 9 5.92M6 12.2h5.84v1.6H6Zm0 3h5.84v1.6H6Zm0 3h6v1.6H6ZM16 8h2v1.6h-2zm4 0h2v1.6h-2zm13-3.8h-8a.8.8 0 0 0-.8.8v6a.8.8 0 0 0 .8.8h8a.8.8 0 0 0 .8-.8V5a.8.8 0 0 0-.8-.8m-.8 6h-6.4V5.8h6.4ZM16 20h2v1.6h-2zm4 0h2v1.6h-2zm13-3.8h-8a.8.8 0 0 0-.8.8v6a.8.8 0 0 0 .8.8h8a.8.8 0 0 0 .8-.8v-6a.8.8 0 0 0-.8-.8m-.8 6h-6.4v-4.4h6.4Z"},null,-1),lt=me("path",{fill:"none",d:"M0 0h36v36H0z"},null,-1),rt=[at,lt];function ot(d,w){return A(),pe("svg",tt,[...rt])}const nt={name:"clarity-thin-client-solid",render:ot},st=j({name:"RetryTaskOperateDrawer",__name:"retry-task-operate-drawer",props:H({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:H(["submitted"],["update:visible"]),setup(d,{emit:w}){const g=d,p=w,k=Q(d,"visible"),{formRef:C,validate:U,restoreValidation:f}=ce(),{defaultRequiredRule:u}=fe(),D=Re(()=>({add:a("page.retryTask.addRetryTask"),edit:a("page.retryTask.editRetryTask")})[g.operateType]),i=ge(I());function I(){return{groupName:"",sceneName:"",idempotentId:"",bizNo:"",executorName:"",argsStr:"",retryStatus:0}}const s={groupName:u,sceneName:u,idempotentId:u,bizNo:u,executorName:u,argsStr:u,retryStatus:u};function T(){if(g.operateType==="add"){Object.assign(i,I());return}g.operateType==="edit"&&g.rowData&&Object.assign(i,g.rowData)}function m(){k.value=!1}async function S(){var N;if(await U(),g.operateType==="add"){const{groupName:c,sceneName:y,idempotentId:z,bizNo:v,executorName:o,argsStr:$,retryStatus:O}=i,{error:W}=await Qe({groupName:c,sceneName:y,idempotentId:z,bizNo:v,executorName:o,argsStr:$,retryStatus:O});if(W)return;(N=window.$message)==null||N.success(a("common.addSuccess"))}m(),p("submitted")}ye(k,()=>{k.value&&(T(),f())});async function x(){const N=i.groupName,c=i.sceneName,y=i.executorName,z=i.argsStr,{data:v,error:o}=await et({groupName:N,sceneName:c,executorName:y,argsStr:z});o||(i.idempotentId=v)}return(N,c)=>{const y=_e,z=ne,v=nt,o=B,$=Ue,O=$e,W=se,X=be,Y=ve;return A(),F(oe,{modelValue:k.value,"onUpdate:modelValue":c[7]||(c[7]=h=>k.value=h),title:D.value,onHandleSubmit:S},{footer:r(()=>[e(Y,{size:16},{default:r(()=>[e(o,{onClick:m},{default:r(()=>[_(b(t(a)("common.cancel")),1)]),_:1}),e(o,{type:"primary",onClick:S},{default:r(()=>[_(b(t(a)("common.save")),1)]),_:1})]),_:1})]),default:r(()=>[e(X,{ref_key:"formRef",ref:C,model:i,rules:s},{default:r(()=>[e(y,{label:t(a)("page.retryTask.groupName"),path:"groupName"},{default:r(()=>[e(ue,{value:i.groupName,"onUpdate:value":c[0]||(c[0]=h=>i.groupName=h),disabled:g.operateType==="edit"},null,8,["value","disabled"])]),_:1},8,["label"]),e(y,{label:t(a)("page.retryTask.sceneName"),path:"sceneName"},{default:r(()=>[e(Ne,{value:i.sceneName,"onUpdate:value":c[1]||(c[1]=h=>i.sceneName=h),"group-name":i.groupName,disabled:g.operateType==="edit"},null,8,["value","group-name","disabled"])]),_:1},8,["label"]),e(y,{label:t(a)("page.retryTask.idempotentId"),path:"idempotentId"},{default:r(()=>[e(O,null,{default:r(()=>[e(z,{value:i.idempotentId,"onUpdate:value":c[2]||(c[2]=h=>i.idempotentId=h),placeholder:t(a)("page.retryTask.form.idempotentId"),disabled:g.operateType==="edit"},null,8,["value","placeholder","disabled"]),e($,{trigger:"hover"},{trigger:r(()=>[e(o,{type:"default",ghost:"",disabled:g.operateType==="edit",onClick:x},{default:r(()=>[e(v,{class:"text-icon"})]),_:1},8,["disabled"])]),default:r(()=>[_(" "+b(t(a)("page.retryTask.generateIdempotentId")),1)]),_:1})]),_:1})]),_:1},8,["label"]),e(y,{label:t(a)("page.retryTask.bizNo"),path:"bizNo"},{default:r(()=>[e(z,{value:i.bizNo,"onUpdate:value":c[3]||(c[3]=h=>i.bizNo=h),placeholder:t(a)("page.retryTask.form.bizNo"),disabled:g.operateType==="edit"},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),e(y,{label:t(a)("page.retryTask.executorName"),path:"executorName"},{default:r(()=>[e(z,{value:i.executorName,"onUpdate:value":c[4]||(c[4]=h=>i.executorName=h),placeholder:t(a)("page.retryTask.form.executorName"),disabled:g.operateType==="edit"},null,8,["value","placeholder","disabled"])]),_:1},8,["label"]),e(y,{label:t(a)("page.retryTask.argsStr"),path:"argsStr"},{default:r(()=>[e(We,{modelValue:i.argsStr,"onUpdate:modelValue":c[5]||(c[5]=h=>i.argsStr=h),lang:"json",placeholder:t(a)("page.jobTask.form.argsStr")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(y,{label:t(a)("page.retryTask.retryStatus"),path:"retryStatus"},{default:r(()=>[e(W,{value:i.retryStatus,"onUpdate:value":c[6]||(c[6]=h=>i.retryStatus=h),placeholder:t(a)("page.retryTask.form.retryStatus"),options:t(le)(t(re))},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),ut=j({name:"RetryTaskBatchAddDrawer",__name:"retry-task-batch-add-drawer",props:{visible:{type:Boolean,default:!1},visibleModifiers:{}},emits:H(["submitted"],["update:visible"]),setup(d,{emit:w}){const g=w,p=Q(d,"visible"),{formRef:k,validate:C,restoreValidation:U}=ce(),{defaultRequiredRule:f}=fe(),u=ge(D());function D(){return{groupName:"",retryStatus:0,logStr:""}}const i={groupName:f,retryStatus:f,logStr:f};function I(){p.value=!1}async function s(){var N;await C();const{groupName:T,retryStatus:m,logStr:S}=u,{error:x}=await Xe({groupName:T,retryStatus:m,logStr:S});x||((N=window.$message)==null||N.success(a("common.addSuccess")),I(),g("submitted"))}return ye(p,()=>{p.value&&U()}),(T,m)=>{const S=_e,x=se,N=ne,c=be,y=B,z=ve;return A(),F(oe,{modelValue:p.value,"onUpdate:modelValue":m[3]||(m[3]=v=>p.value=v),title:t(a)("page.retryTask.batchAddRetryTask"),onHandleSubmit:s},{footer:r(()=>[e(z,{size:16},{default:r(()=>[e(y,{onClick:I},{default:r(()=>[_(b(t(a)("common.cancel")),1)]),_:1}),e(y,{type:"primary",onClick:s},{default:r(()=>[_(b(t(a)("common.save")),1)]),_:1})]),_:1})]),default:r(()=>[e(c,{ref_key:"formRef",ref:k,model:u,rules:i},{default:r(()=>[e(S,{label:t(a)("page.retryTask.groupName"),path:"groupName"},{default:r(()=>[e(ue,{value:u.groupName,"onUpdate:value":m[0]||(m[0]=v=>u.groupName=v)},null,8,["value"])]),_:1},8,["label"]),e(S,{label:t(a)("page.retryTask.retryStatus"),path:"retryStatus"},{default:r(()=>[e(x,{value:u.retryStatus,"onUpdate:value":m[1]||(m[1]=v=>u.retryStatus=v),placeholder:t(a)("page.retryTask.form.retryStatus"),options:t(le)(t(re))},null,8,["value","placeholder","options"])]),_:1},8,["label"]),e(S,{label:t(a)("page.retryTask.form.logStr"),path:"logStr"},{default:r(()=>[e(N,{value:u.logStr,"onUpdate:value":m[2]||(m[2]=v=>u.logStr=v),type:"textarea",placeholder:t(a)("page.retryTask.form.logStr")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),it=j({name:"RetryTaskSearch",__name:"retry-task-search",props:{model:{required:!0},modelModifiers:{}},emits:H(["reset","search"],["update:model"]),setup(d,{emit:w}){const g=w,p=Q(d,"model");function k(){g("reset")}function C(){g("search")}return(U,f)=>{const u=Se,D=ne,i=se,I=we;return A(),F(I,{model:p.value,onSearch:C,onReset:k},{default:r(()=>[e(u,{span:"24 s:12 m:6",label:t(a)("page.retryTask.groupName"),path:"groupName",class:"pr-24px"},{default:r(()=>[e(ue,{value:p.value.groupName,"onUpdate:value":f[0]||(f[0]=s=>p.value.groupName=s)},null,8,["value"])]),_:1},8,["label"]),e(u,{span:"24 s:12 m:6",label:t(a)("page.retryTask.sceneName"),path:"sceneName",class:"pr-24px"},{default:r(()=>[e(Ne,{value:p.value.sceneName,"onUpdate:value":f[1]||(f[1]=s=>p.value.sceneName=s),"group-name":p.value.groupName},null,8,["value","group-name"])]),_:1},8,["label"]),e(u,{span:"24 s:12 m:6",label:t(a)("page.retryTask.uniqueId"),path:"uniqueId",class:"pr-24px"},{default:r(()=>[e(D,{value:p.value.uniqueId,"onUpdate:value":f[2]||(f[2]=s=>p.value.uniqueId=s),placeholder:t(a)("page.retryTask.form.uniqueId")},null,8,["value","placeholder"])]),_:1},8,["label"]),e(u,{span:"24 s:12 m:6",label:t(a)("page.retryTask.idempotentId"),path:"idempotentId",class:"pr-24px"},{default:r(()=>[e(D,{value:p.value.idempotentId,"onUpdate:value":f[3]||(f[3]=s=>p.value.idempotentId=s),placeholder:t(a)("page.retryTask.form.idempotentId")},null,8,["value","placeholder"])]),_:1},8,["label"]),e(u,{span:"24 s:12 m:6",label:t(a)("page.retryTask.bizNo"),path:"bizNo",class:"pr-24px"},{default:r(()=>[e(D,{value:p.value.bizNo,"onUpdate:value":f[4]||(f[4]=s=>p.value.bizNo=s),placeholder:t(a)("page.retryTask.form.bizNo")},null,8,["value","placeholder"])]),_:1},8,["label"]),e(u,{span:"24 s:12 m:6",label:t(a)("page.retryTask.retryStatus"),path:"retryStatus",class:"pr-24px"},{default:r(()=>[e(i,{value:p.value.retryStatus,"onUpdate:value":f[5]||(f[5]=s=>p.value.retryStatus=s),placeholder:t(a)("page.retryTask.form.retryStatus"),options:t(le)(t(re))},null,8,["value","placeholder","options"])]),_:1},8,["label"])]),_:1},8,["model"])}}}),dt=j({name:"SceneDetailDrawer",__name:"retry-task-detail-drawer",props:H({rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(d){const w=d,g=Q(d,"visible"),p=K([]),k=K(),C=new AbortController,U=K(!1);let f="0",u=0;async function D(){const{data:s,error:T}=await He({groupName:w.rowData.groupName,uniqueId:w.rowData.uniqueId,startId:f,fromIndex:u,size:50});T||(U.value=s.finished,f=s.nextStartId,u=s.fromIndex,s.message&&(p.value.push(...s.message),p.value.sort((m,S)=>Number.parseInt(m.time_stamp,10)-Number.parseInt(S.time_stamp,10))),U.value||(clearTimeout(k.value),k.value=setTimeout(D,1e3)))}const i=async s=>{s===1&&p.value.length===0&&await D()},I=()=>{U.value=!0,C.abort(),clearTimeout(k.value),k.value=void 0};return Ve(()=>{I()}),(s,T)=>{const m=je,S=ae,x=Ge,N=Ce,c=Le,y=Be,z=Ae,v=oe;return A(),F(v,{modelValue:g.value,"onUpdate:modelValue":T[1]||(T[1]=o=>g.value=o),title:t(a)("page.retryTask.detail")},{default:r(()=>[e(z,{type:"segment",animated:"","onUpdate:value":i},{default:r(()=>[e(N,{name:0,tab:t(a)("page.log.info")},{default:r(()=>[e(x,{"label-placement":"top",bordered:"",column:2},{default:r(()=>[e(m,{label:t(a)("page.retryTask.uniqueId"),span:2},{default:r(()=>{var o;return[_(b((o=s.rowData)==null?void 0:o.uniqueId),1)]}),_:1},8,["label"]),e(m,{label:t(a)("page.retryTask.groupName"),span:2},{default:r(()=>{var o;return[_(b((o=s.rowData)==null?void 0:o.groupName),1)]}),_:1},8,["label"]),e(m,{label:t(a)("page.retryTask.sceneName"),span:2},{default:r(()=>{var o;return[_(b((o=s.rowData)==null?void 0:o.sceneName),1)]}),_:1},8,["label"]),e(m,{label:t(a)("page.retryTask.nextTriggerAt"),span:1},{default:r(()=>{var o;return[_(b((o=s.rowData)==null?void 0:o.nextTriggerAt),1)]}),_:1},8,["label"]),e(m,{label:t(a)("page.retryTask.retryCount"),span:1},{default:r(()=>{var o;return[_(b((o=s.rowData)==null?void 0:o.retryCount),1)]}),_:1},8,["label"]),e(m,{label:t(a)("page.retryTask.retryStatus"),span:1},{default:r(()=>{var o;return[e(S,{type:t(te)((o=s.rowData)==null?void 0:o.retryStatus)},{default:r(()=>{var $;return[_(b(t(a)(t(he)[($=s.rowData)==null?void 0:$.retryStatus])),1)]}),_:1},8,["type"])]}),_:1},8,["label"]),e(m,{label:t(a)("page.retryTask.taskType"),span:1},{default:r(()=>{var o;return[e(S,{type:t(te)((o=s.rowData)==null?void 0:o.taskType)},{default:r(()=>{var $;return[_(b(t(a)(t(ke)[($=s.rowData)==null?void 0:$.taskType])),1)]}),_:1},8,["type"])]}),_:1},8,["label"]),e(m,{label:t(a)("page.retryTask.bizNo"),span:2},{default:r(()=>{var o;return[_(b((o=s.rowData)==null?void 0:o.bizNo),1)]}),_:1},8,["label"]),e(m,{label:t(a)("page.retryTask.idempotentId"),span:2},{default:r(()=>{var o;return[_(b((o=s.rowData)==null?void 0:o.idempotentId),1)]}),_:1},8,["label"]),e(m,{label:t(a)("page.retryTask.executorName"),span:2},{default:r(()=>{var o;return[_(b((o=s.rowData)==null?void 0:o.executorName),1)]}),_:1},8,["label"]),e(m,{label:t(a)("page.retryTask.argsStr"),span:2},{default:r(()=>{var o;return[_(b((o=s.rowData)==null?void 0:o.argsStr),1)]}),_:1},8,["label"]),e(m,{label:t(a)("common.createDt"),span:1},{default:r(()=>{var o;return[_(b((o=s.rowData)==null?void 0:o.createDt),1)]}),_:1},8,["label"]),e(m,{label:t(a)("common.updateDt"),span:1},{default:r(()=>{var o;return[_(b((o=s.rowData)==null?void 0:o.updateDt),1)]}),_:1},8,["label"])]),_:1})]),_:1},8,["tab"]),e(N,{name:1,tab:t(a)("page.log.title"),"display-directive":"if"},{default:r(()=>[p.value.length>0?(A(),F(c,{key:0,modelValue:p.value,"onUpdate:modelValue":T[0]||(T[0]=o=>p.value=o),drawer:!1},null,8,["modelValue"])):(A(),F(y,{key:1,class:"h-full"}))]),_:1},8,["tab"])]),_:1})]),_:1},8,["modelValue","title"])}}}),pt={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function M(d){return typeof d=="function"||Object.prototype.toString.call(d)==="[object Object]"&&!Fe(d)}const Tt=j({name:"retry_task",__name:"index",setup(d){const w=K(),{bool:g,setTrue:p}=ie(!1),k=qe(),{columns:C,columnChecks:U,data:f,getData:u,loading:D,mobilePagination:i,searchParams:I,resetSearchParams:s}=Ie({apiFn:Ze,apiParams:{page:1,size:10,uniqueId:null,groupName:null,sceneName:null,idempotentId:null,bizNo:null,retryStatus:null},columns:()=>[{type:"selection",align:"center",width:48},{key:"uniqueId",title:a("page.retryTask.uniqueId"),align:"left",fixed:"left",minWidth:120,render:n=>{async function l(){await o(n),p()}return e(B,{text:!0,tag:"a",type:"primary",onClick:l,class:"ws-normal"},{default:()=>[n.uniqueId]})}},{key:"groupName",title:a("page.retryTask.groupName"),align:"left",resizable:!0,minWidth:120,maxWidth:250},{key:"sceneName",title:a("page.retryTask.sceneName"),align:"left",minWidth:120},{key:"nextTriggerAt",title:a("page.retryTask.nextTriggerAt"),align:"left",resizable:!0,minWidth:120,maxWidth:150},{key:"retryCount",title:a("page.retryTask.retryCount"),align:"center",width:80},{key:"retryStatus",title:a("page.retryTask.retryStatus"),align:"left",width:120,render:n=>{if(n.retryStatus===null)return null;const l=a(he[n.retryStatus]);return e(ae,{type:te(n.retryStatus)},M(l)?l:{default:()=>[l]})}},{key:"taskType",title:a("page.retryTask.taskType"),align:"left",width:100,render:n=>{if(n.taskType===null)return null;const l={1:"warning",2:"error"},V=a(ke[n.taskType]);return e(ae,{type:l[n.taskType]},M(V)?V:{default:()=>[V]})}},{key:"idempotentId",title:a("page.retryTask.idempotentId"),align:"left",resizable:!0,minWidth:150,maxWidth:300},{key:"bizNo",title:a("page.retryTask.bizNo"),align:"left",resizable:!0,minWidth:150,maxWidth:300},{key:"operate",title:a("common.operate"),align:"left",width:260,fixed:"right",render:n=>e("div",{class:"flex-center gap-8px"},[n.retryStatus!==1&&n.retryStatus!==2?e(E,null,[e(L,{onPositiveClick:()=>W(n.groupName,n.uniqueId)},{default:()=>a("common.confirmExecute"),trigger:()=>{let l;return e(B,{type:"info",text:!0,ghost:!0,size:"small"},M(l=a("common.execute"))?l:{default:()=>[l]})}}),e(Z,{vertical:!0},null)]):"",n.retryStatus!==1&&n.retryStatus!==2?e(E,null,[e(L,{onPositiveClick:()=>h(Number(n.id),n.groupName)},{default:()=>a("common.confirmFinish"),trigger:()=>{let l;return e(B,{type:"warning",text:!0,ghost:!0,size:"small"},M(l=a("common.finish"))?l:{default:()=>[l]})}}),e(Z,{vertical:!0},null)]):"",n.retryStatus===0?e(E,null,[e(L,{onPositiveClick:()=>Y(Number(n.id),n.groupName)},{default:()=>a("common.confirmPause"),trigger:()=>{let l;return e(B,{type:"success",text:!0,ghost:!0,size:"small"},M(l=a("common.pause"))?l:{default:()=>[l]})}}),e(Z,{vertical:!0},null)]):"",n.retryStatus===3?e(E,null,[e(L,{onPositiveClick:()=>X(Number(n.id),n.groupName)},{default:()=>a("common.confirmResume"),trigger:()=>{let l;return e(B,{type:"info",text:!0,ghost:!0,size:"small"},M(l=a("common.resume"))?l:{default:()=>[l]})}}),e(Z,{vertical:!0},null)]):"",e(L,{onPositiveClick:()=>v(n.groupName,n.id)},{default:()=>a("common.confirmDelete"),trigger:()=>{let l;return e(B,{type:"error",text:!0,ghost:!0,size:"small"},M(l=a("common.delete"))?l:{default:()=>[l]})}})])}]}),{drawerVisible:T,operateType:m,handleAdd:S,checkedRowKeys:x,onBatchDeleted:N,onDeleted:c}=De(f,u),{bool:y,setTrue:z}=ie();async function v(n,l){const{error:V}=await de({groupName:n,ids:[l]});V||c()}async function o(n){const l=await Ke(n.id,n.groupName);w.value=l.data||null}async function $(){const n=x.value;if(n.length===0)return;const l=f.value[0].groupName,{error:V}=await de({groupName:l,ids:n});V||N()}function O(){z()}function W(n,l){Je({groupName:n,uniqueIds:[l]})}function X(n,l){J(n,l,0)}function Y(n,l){J(n,l,3)}function h(n,l){J(n,l,1)}async function J(n,l,V){var G;const{error:ee}=await Ye({id:n,groupName:l,retryStatus:V});ee||((G=window.$message)==null||G.success(a("common.updateSuccess")),u())}return Me(async()=>{const{error:n,data:l}=await Oe();!n&&l.length>0&&(I.groupName=l[0],u())}),(n,l)=>{const V=xe,ee=ze,G=Ee,Te=Pe;return A(),pe("div",pt,[e(it,{model:t(I),"onUpdate:model":l[0]||(l[0]=R=>P(I)?I.value=R:null),onReset:t(s),onSearch:t(u)},null,8,["model","onReset","onSearch"]),e(Te,{title:t(a)("page.retryTask.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper","header-class":"view-card-header"},{"header-extra":r(()=>[e(ee,{columns:t(U),"onUpdate:columns":l[1]||(l[1]=R=>P(U)?U.value=R:null),"disabled-delete":t(x).length===0,loading:t(D),onAdd:t(S),onDelete:$,onRefresh:t(u)},{addAfter:r(()=>[e(t(B),{size:"small",ghost:"",type:"primary",onClick:O},{icon:r(()=>[e(V,{class:"text-icon"})]),default:r(()=>[_(" "+b(t(a)("common.batchAdd")),1)]),_:1})]),_:1},8,["columns","disabled-delete","loading","onAdd","onRefresh"])]),default:r(()=>[e(G,{"checked-row-keys":t(x),"onUpdate:checkedRowKeys":l[2]||(l[2]=R=>P(x)?x.value=R:null),columns:t(C),data:t(f),"flex-height":!t(k).isMobile,"scroll-x":2e3,loading:t(D),remote:"","row-key":R=>R.id,pagination:t(i),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),e(st,{visible:t(T),"onUpdate:visible":l[3]||(l[3]=R=>P(T)?T.value=R:null),"operate-type":t(m),onSubmitted:t(u)},null,8,["visible","operate-type","onSubmitted"]),e(ut,{visible:t(y),"onUpdate:visible":l[4]||(l[4]=R=>P(y)?y.value=R:null),onSubmitted:t(u)},null,8,["visible","onSubmitted"]),e(dt,{visible:t(g),"onUpdate:visible":l[5]||(l[5]=R=>P(g)?g.value=R:null),"row-data":w.value},null,8,["visible","row-data"])]),_:1},8,["title"])])}}});export{Tt as default};
