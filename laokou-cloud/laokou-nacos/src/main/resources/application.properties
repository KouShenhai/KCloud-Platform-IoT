#   /*
#    * copyright (c) 2022-2026 kcloud-platform-iot author or authors. all rights reserved.
#    *
#    * licensed under the apache license, version 2.0 (the "license");
#    * you may not use this file except in compliance with the license.
#    * you may obtain a copy of the license at
#    *
#    *   http://www.apache.org/licenses/license-2.0
#    *
#    * unless required by applicable law or agreed to in writing, software
#    * distributed under the license is distributed on an "as is" basis,
#    * without warranties or conditions of any kind, either express or implied.
#    * see the license for the specific language governing permissions and
#    * limitations under the license.
#    *
#    */
# 密钥
jasypt.encryptor.password=@secret-key@
# 开启请求压缩
server.compression.enabled=true
# 工作线程池的最大线程数
server.jetty.threads.max=5000
# 工作线程池的最小备用线程数
server.jetty.threads.min=50
# 空闲超时时间
server.jetty.threads.idle-timeout=30s
# 线程池队列大小
server.jetty.threads.max-queue-capacity=10000
# selector线程池大小
server.jetty.threads.selectors=16
# accept线程池大小
server.jetty.threads.acceptors=16
# 是否开启日志
server.jetty.accesslog.append=false
# 访问日志格式
server.jetty.accesslog.format=ncsa
# 访问日志保留天数
server.jetty.accesslog.retention-period=7
# 最大连接数
server.jetty.max-connections=50000
# 表单参数最大数量
server.jetty.max-form-keys=5000
# 连接空闲超时时间
server.jetty.connection-idle-timeout=5m
# 请求参数最大大小
server.jetty.max-http-form-post-size=100MB
# 最大响应头大小
server.jetty.max-http-response-header-size=32KB
# 应用程序在发生错误时，http 响应中始终返回具体的错误消息
server.error.include-message=always
# 关闭证书
server.ssl.enabled=false
# 关闭http2
server.http2.enabled=false
# 优雅停机
server.shutdown=graceful
# 应用名称
spring.application.name=${service_id:laokou-nacos}
# 环境
spring.profiles.active=@profile-active@
# 不暴露指标到elastic
management.elastic.metrics.export.enabled=false
# 不暴露指标到influx
management.influx.metrics.export.enabled=false
# 配置推送失败时的最大重试次数
nacos.config.push.maxretrytime=50
# 启用认证信息的缓存，减少重复认证的开销
nacos.core.auth.caching.enabled=true
# 开启认证
nacos.core.auth.enabled=true
# 禁用 token 缓存，每次请求需重新验证 token
nacos.core.auth.plugin.nacos.token.cache.enable=false
#  token 的有效期，超时后需重新获取
nacos.core.auth.plugin.nacos.token.expire.seconds=18000
# 生成和验证 token 的密钥【base64编码】
nacos.core.auth.plugin.nacos.token.secret.key=u2vjcmv0s2v5mdeymzq1njc4otaxmjm0nty3odkwmtizndu2nzg5
# 服务节点间通信的认证标识，用于集群内部身份校验【key】
nacos.core.auth.server.identity.key=serveridentity
# 服务节点间通信的认证标识，用于集群内部身份校验【value】
nacos.core.auth.server.identity.value=security
# 指定系统类型为 nacos
nacos.core.auth.system.type=nacos
# 禁用 istio 的 mesh configuration protocol (mcp) 服务 =>  若不使用 istio 服务网格，可关闭此功能
nacos.istio.mcp.server.enabled=false
# 自动清理无实例注册的空服务
nacos.naming.empty-service.auto-clean=true
# 服务清理任务的初始延迟时间
nacos.naming.empty-service.clean.initial-delay-ms=50000
# 服务清理任务的执行间隔，每 30 秒检查一次
nacos.naming.empty-service.clean.period-time-ms=30000
# 配置无需认证即可访问的 url 路径，通常用于静态资源或健康检查
nacos.security.ignore.urls=/,/error,/**/*.css,/**/*.js,/**/*.html,/**/*.map,/**/*.svg,/**/*.png,/**/*.ico,/console-ui/public/**,/v1/auth/**,/v1/console/health/**,/actuator/**,/v1/console/server/**
# nacos服务控制台端口
nacos.console.port=8048
# nacos服务主端口
nacos.server.main.port=8848
# nacos服务上下文路径
nacos.server.contextpath=/nacos
# nacos服务控制台上下文路径
nacos.console.contextpath=
# 控制台访问远程nacos服务，使用的上下文路径
nacos.console.remote.server.context-path=/nacos
# 开启nacos管理员认证
nacos.core.auth.admin.enabled=true
# 控制台是否启用认证
nacos.core.auth.console.enabled=true
# 是否启用kubernetes同步，false表示不启用
nacos.k8s.sync.enabled=false
# 部署模式
# standalone：单机模式
# cluster：集群模式
# merged：合并模式（nacos支持config+naming模块合并部署，默认推荐方式）
nacos.deployment.type=merged
# 单个客户端最多能订阅20个模糊匹配模式（用于服务发现）
nacos.naming.fuzzy.watch.max.pattern.count=20
# 每个模糊模式最多能匹配500个服务
nacos.naming.fuzzy.watch.max.pattern.match.service.count=500
# 单个客户端最多能订阅20个模糊模式（用于配置监听）
nacos.config.fuzzy.watch.max.pattern.count=20
# 每个模糊模式最多能匹配500个配置项
nacos.config.fuzzy.watch.max.pattern.match.config.count=500
# 指定数据库类型
spring.sql.init.platform=${nacos_ds_platform:postgresql}
# 数据库数量，请按照作者的来，请不要瞎几把改
# 数据库数量，请按照作者的来，请不要瞎几把改
# 数据库数量，请按照作者的来，请不要瞎几把改
db.num=1
# 数据库连接地址
db.url.'0'=jdbc:${nacos_ds_platform:postgresql}://${nacos_ds_host:postgresql}:${nacos_ds_port:5432}/${nacos_ds_db:kcloud_platform_nacos}?tcpkeepalive=true&amp;rewritebatchedinserts=true&amp;applicationname=laokou-nacos&amp;usessl=false&amp;rewritebatchedinserts=true&amp;stringtype=unspecified
# 数据库用户名
db.user.'0'=${nacos_ds_username:enc(l126ctjtlg8okxrns5aofcn96eqpbqmqortqpnwfmvcysqljnbeux+9f6hlwdoek)}
# 数据库密码
db.password.'0'=${nacos_ds_password:enc(bhsqlmbkjwvxpseo9ox8oslul2y4rwfgtybrxaztsadzz1z4rbewbmoxjf2hnu4o)}
# see datasourcepoolproperties 与 externaldatasourceproperties
# see datasourcepoolproperties
# see hikariconfig
# 最小空闲连接数
db.pool.config.minimum-idle=5
# 空闲连接的最大存活时间
db.pool.config.idle-timeout=600000
# 连接时间
db.pool.config.connection-timeout=30000
# 超时时间
db.pool.config.validation-timeout=10000
# 最大连接数
db.pool.config.maximum-pool-size=50
# 数据库驱动
db.pool.config.driver-class-name=${nacos_ds_driver:org.postgresql.driver}
