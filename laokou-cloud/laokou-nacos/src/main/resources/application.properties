#   /*
#    * Copyright (c) 2022-2026 KCloud-Platform-IoT Author or Authors. All Rights Reserved.
#    *
#    * Licensed under the Apache License, Version 2.0 (the "License");
#    * you may not use this file except in compliance with the License.
#    * You may obtain a copy of the License at
#    *
#    *   http://www.apache.org/licenses/LICENSE-2.0
#    *
#    * Unless required by applicable law or agreed to in writing, software
#    * distributed under the License is distributed on an "AS IS" BASIS,
#    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#    * See the License for the specific language governing permissions and
#    * limitations under the License.
#    *
#    */
# 密钥
jasypt.encryptor.password=@SECRET-KEY@
# 开启请求压缩
server.compression.enabled=true
# 工作线程池的最大线程数
server.tomcat.threads.max=500
# 工作线程池的最小备用线程数
server.tomcat.threads.min-spare=50
# 最大连接数
server.tomcat.max-connections=10000
# 当所有工作线程都在忙时，允许等待处理的最大连接数
server.tomcat.accept-count=200
# uri编码
server.tomcat.uri-encoding=UTF-8
# 连接超时时间
server.tomcat.connection-timeout=60s
# 应用程序在发生错误时，http 响应中始终返回具体的错误消息
server.error.include-message=always
# 关闭证书
server.ssl.enabled=false
# 关闭http2
server.http2.enabled=false
# 优雅停机
server.shutdown=graceful
# 应用名称
spring.application.name=${SERVICE_ID:laokou-nacos}
# 环境
spring.profiles.active=@PROFILE-ACTIVE@
# 开启虚拟线程
spring.threads.virtual.enabled=true
# 不暴露指标到elastic
management.elastic.metrics.export.enabled=false
# 不暴露指标到influx
management.influx.metrics.export.enabled=false
# 配置推送失败时的最大重试次数
nacos.config.push.maxRetryTime=50
# 启用认证信息的缓存，减少重复认证的开销
nacos.core.auth.caching.enabled=true
# 开启认证
nacos.core.auth.enabled=true
# 禁用 token 缓存，每次请求需重新验证 token
nacos.core.auth.plugin.nacos.token.cache.enable=false
#  token 的有效期，超时后需重新获取
nacos.core.auth.plugin.nacos.token.expire.seconds=18000
# 生成和验证 token 的密钥【base64编码】
nacos.core.auth.plugin.nacos.token.secret.key=U2VjcmV0S2V5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5
# 服务节点间通信的认证标识，用于集群内部身份校验【key】
nacos.core.auth.server.identity.key=serverIdentity
# 服务节点间通信的认证标识，用于集群内部身份校验【value】
nacos.core.auth.server.identity.value=security
# 指定系统类型为 nacos
nacos.core.auth.system.type=nacos
# 禁用 istio 的 mesh configuration protocol (mcp) 服务 =>  若不使用 istio 服务网格，可关闭此功能
nacos.istio.mcp.server.enabled=false
# 自动清理无实例注册的空服务
nacos.naming.empty-service.auto-clean=true
# 服务清理任务的初始延迟时间
nacos.naming.empty-service.clean.initial-delay-ms=50000
# 服务清理任务的执行间隔，每 30 秒检查一次
nacos.naming.empty-service.clean.period-time-ms=30000
# 配置无需认证即可访问的 url 路径，通常用于静态资源或健康检查
nacos.security.ignore.urls=/,/error,/**/*.css,/**/*.js,/**/*.html,/**/*.map,/**/*.svg,/**/*.png,/**/*.ico,/console-ui/public/**,/v1/auth/**,/v1/console/health/**,/actuator/**,/v1/console/server/**
# \u7981\u7528SpringBoot\u7684\u6570\u636E\u5E93\u81EA\u52A8\u88C5\u914D
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
# nacos服务控制台端口
nacos.console.port=8048
# nacos服务主端口
nacos.server.main.port=8848
# nacos服务上下文路径
nacos.server.contextPath=/nacos
# nacos服务控制台上下文路径
nacos.console.contextPath=
# 控制台访问远程nacos服务，使用的上下文路径
nacos.console.remote.server.context-path=/nacos
# 开启nacos管理员认证
nacos.core.auth.admin.enabled=true
# 控制台是否启用认证
nacos.core.auth.console.enabled=true
# 是否启用kubernetes同步，false表示不启用
nacos.k8s.sync.enabled=false
# 部署模式
# standalone：单机模式
# cluster：集群模式
# merged：合并模式（nacos支持config+naming模块合并部署，默认推荐方式）
nacos.deployment.type=merged
# 单个客户端最多能订阅20个模糊匹配模式（用于服务发现）
nacos.naming.fuzzy.watch.max.pattern.count=20
# 每个模糊模式最多能匹配500个服务
nacos.naming.fuzzy.watch.max.pattern.match.service.count=500
# 单个客户端最多能订阅20个模糊模式（用于配置监听）
nacos.config.fuzzy.watch.max.pattern.count=20
# 每个模糊模式最多能匹配500个配置项
nacos.config.fuzzy.watch.max.pattern.match.config.count=500
# 指定数据库类型
spring.sql.init.platform=${NACOS_DS_PLATFORM:postgresql}
# 数据库数量，请按照作者的来，请不要瞎几把改
# 数据库数量，请按照作者的来，请不要瞎几把改
# 数据库数量，请按照作者的来，请不要瞎几把改
db.num=1
# 数据库连接地址
db.url.'0'=jdbc:${NACOS_DS_PLATFORM:postgresql}://${NACOS_DS_HOST:postgresql}:${NACOS_DS_PORT:5432}/${NACOS_DS_DB:kcloud_platform_nacos}?tcpKeepAlive=true&amp;reWriteBatchedInserts=true&amp;ApplicationName=laokou-nacos&amp;useSSL=false&amp;reWriteBatchedInserts=true&amp;stringtype=unspecified
# 数据库用户名
db.user.'0'=${NACOS_DS_USERNAME:ENC(l126CTjtLG8OkXRNs5aofcN96EQpbQmQorTqpnWFMvcysQLjNBEuX+9f6hLwdoEk)}
# 数据库密码
db.password.'0'=${NACOS_DS_PASSWORD:ENC(BhsqlMbKjWVxPseo9OX8osLuL2Y4rWfGTyBRXaZTsAdzZ1Z4rBewBmoXjf2Hnu4o)}
# see DataSourcePoolProperties \u4E0E ExternalDataSourceProperties
# see DataSourcePoolProperties
# see HikariConfig
# 最小空闲连接数
db.pool.config.minimum-idle=5
# 空闲连接的最大存活时间
db.pool.config.idle-timeout=600000
# 连接时间
db.pool.config.connection-timeout=30000
# 超时时间
db.pool.config.validation-timeout=10000
# 最大连接数
db.pool.config.maximum-pool-size=50
# 数据库驱动
db.pool.config.driver-class-name=${NACOS_DS_DRIVER:org.postgresql.Driver}
